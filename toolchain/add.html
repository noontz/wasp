<!doctype html>
<html>

  <head>
    <meta charset="utf-8">
    <title>MEMORY ACCESS TEST</title>
  </head> 
  <div>
    <h1 style="display: inline;">MEMORY LOCATION : </h1>
    <h1 id='POINTER' style="display: inline;"></h1>
  </div> 
  <div>
    <h1 style="display: inline;">VALUE : </h1>
    <h1 id='VALUE' style="display: inline;"></h1>
  </div>
  <body>
    <script>
     var bytecode = new Uint8Array([
     0x00, 0x61, 0x73, 0x6D, 0x01, 0x00, 0x00, 0x00, 0x04, 0x04,
     0x01, 0x70, 0x00, 0x00, 0x05, 0x03, 0x01, 0x00, 0x01, 0x06,
     0x06, 0x01, 0x7F, 0x00, 0x41, 0x00, 0x0B, 0x07, 0x11, 0x02,
     0x05, 0x4D, 0x59, 0x56, 0x41, 0x52, 0x03, 0x00, 0x05, 0x4D,
     0x59, 0x4D, 0x45, 0x4D, 0x02, 0x00, 0x0B, 0x0A, 0x01, 0x00,
     0x41, 0x00, 0x0B, 0x04, 0x08, 0x00, 0x00, 0x00
]);
WebAssembly.instantiate(bytecode).then(function(wasm) {
  console.log(wasm.module);
  console.log(wasm.instance);
  let pointer = wasm.instance.exports.MYVAR;
  document.getElementById('POINTER').innerHTML = pointer;
  let mem = new WebAssembly.Memory({initial : 1});
  let memory = wasm.instance.exports.MYMEM; // New!!
  let intView = new Uint32Array(memory.buffer);
  document.getElementById('VALUE').innerHTML = intView[pointer];
  });
 
    </script>
  </body>

</html>